---
title: "Кодирование данных в телекоммуникационных сетях"
output: html_document
---

## Цель

Изучение  методов  физического  и  логического кодирования,
используемых в цифровых сетях передачи данных.

## Задание

В процессе выполнения работы необходимо выполнить логическое и физическое
кодирование исходного сообщения в соответствии с заданными методами кодирования,
провести сравнительный анализ рассматриваемых методов кодирования, выбрать и обосновать
наилучший метод для передачи исходного сообщения.

## Ход работы

### Этап 1. Формирование сообщения

Исходное сообщение: `Лабушев Т.М.`

В шестнадцатеричном коде: `CB E0 E1 F3 F8 E5 E2 20 D2 2E CC 2E`

В двоичном коде: `11001011 11100000 11100001 11110011 11111000 11100101 11100010 00100000 11010010 00101110 11001100 00101110`

Длина сообщения: 12 байт (96 бит)

### Этап 2. Физическое кодирование исходного сообщения

#### Определение частот

Возьмем за основу разложение сигнала `10101010` в ряд Фурье ???

#### Потенциальный код NRZ

Результат кодирования первых четырех байт сообщения:

![Рисунок 1. Потенциальный код NRZ](nrz-enc.png)

Минимальный период достигается при кодировании чередующихся сигналов (`010`), а максимальный период — при кодировании последовательности единиц или нулей. Самая длинная нечередующаяся последовательность, встречающаяся в сообщении — `1111111`, следовательно, `T_{max} = 7T_0`.

Можно увидеть, что $T_{min}$ соответствует периоду дискретного сигнала $T_0$, то есть *основной гармонике*. Основываясь на том, что частота основной гармоники $f_0 = \frac{1}{T_0}$, найдем верхнюю и нижнюю границу частот, разложив сигналы в ряд Фурье:
$$\sum_{i\in{1,3,5,7}} \frac{1}{i}A_0sin(2\pi f_it),\ f_i = \frac{1}{T}i$$
Гармониками высших порядков пренебрежем из-за их малого вклада в результирующий сигнал.

Разложим на ряд Фурье сигнал из чередующихся единиц и нулей ($T_{max}$):
$$A_0sin(2\pi \frac{1}{7}f_0t) + \frac{1}{3}A_0sin(2\pi \frac{3}{7}f_0t) + \frac{1}{5}A_0sin(2\pi \frac{5}{7}f_0t) + \frac{1}{7}A_0sin(2\pi f_0t)$$
Получим $f_{min} = \frac{1}{7}f_0$.

Разложим на ряд Фурье сигнал из последовательности из семи единиц ($T_{min}$):
$$A_0sin(2\pi f_0t) + \frac{1}{3}A_0sin(2\pi 3f_0t) + \frac{1}{5}A_0sin(2\pi 5f_0t) + \frac{1}{7}A_0sin(2\pi 7f_0t)$$
Получим $f_{max} = 7f_0$.

Таким образом, спектр сигнала: $\frac{1}{7}f_0\ldots 7f_0$.

Рассчитаем значения, зависящие от пропускной способности канала $C$:

* Частоту основной гармоники сигнала из последовательности `1111111...`: ?
* Нижнюю границу частот $f_{min} = \frac{1}{7}f_0 = \frac{1}{7}\cdot\frac{1}{2}C$
* Верхнюю границу частот $f_{max} = 7f_0 = 7\cdot\frac{1}{2}C$
* Необходимую полосу пропускания $F = f_{min} \ldots f_{max}$

Для нахождения среднего значения частоты передаваемого сообщения,
обратимся к диаграмме передачи первых четырех байтов.
На ней можно выделить пять участков с разными частотами:

* $f_1 = f_0$ при кодировании `0` и `1` (2 бита из 32)
* $f_2 = \frac{1}{2}f_0$ при кодировании `00` и `11` (8 бит из 32)
* $f_3 = \frac{1}{3}f_0$ при кодировании `000` и `111` (3 бита из 32)
* $f_4 = \frac{1}{4}f_0$ при кодировании `0000` и `1111` (4 бита из 32)
* $f_5 = \frac{1}{5}f_0$ при кодировании `00000` и `11111` (15 бит из 32)

Возьмем их среднее арифметическое:

$$f_{mean} = \frac{2}{32}\cdot f_0 + \frac{8}{32}\cdot\frac{1}{2}\cdot f_0 + \frac{3}{32}\cdot\frac{1}{3}\cdot f_0 + \frac{4}{32}\cdot\frac{1}{4}\cdot f_0 + \frac{15}{32}\cdot\frac{1}{5}\cdot f_0$$

```{r, echo=F}
r_mega <- function(n, digits=4) toString(round(n / 10^6, digits))
nrz_fmean <- function(bps)
  (2/32*(1/2*bps) + 8/32*1/2*(1/2*bps) + 3/32*1/3*(1/2*bps) + 4/32*1/4*(1/2*bps) + 15/32*1/5*(1/2*bps))
```

##### Рассчитанные показатели

| $C$, бит/с | ? | $f_{min}$, МГц | $f_{max}$, МГц | $F$, МГц | $f_{mean}$, МГц |
| --- | --- | --- | --- | --- | --- |
| $10^7$ | | $`r r_mega(1/7*0.5*10^7, 6)`$ | $`r r_mega(7*0.5*10^7)`$ | $0.71 \ldots 35$ | $`r r_mega(nrz_fmean(10^7))`$ |
| $10^8$ | | $`r r_mega(1/7*0.5*10^8, 5)`$ | $`r r_mega(7*0.5*10^8)`$ | $7.1 \ldots 350$ | $`r r_mega(nrz_fmean(10^8))`$ |
| $10^9$ | | $`r r_mega(1/7*0.5*10^9, 4)`$ | $`r r_mega(7*0.5*10^9)`$ | $71 \ldots 3500$ | $`r r_mega(nrz_fmean(10^9))`$ |

#### Манчестерский код

Результат кодирования первых четырех байт сообщения:

![Рисунок 2. Манчестерский код](manchester-enc.png)

Минимальный период (верхняя граница частот) достигается при кодировании последовательности единиц или нулей (11, 00), а максимальный период (нижняя граница частот) — при кодировании чередующихся единиц и нулей (10, 01). Можно увидеть, что $T_{min} = \frac{1}{2}T_{max}$, при том, что $T_{min} = T$ соответствует периоду дискретного сигнала, то есть основной гармонике. Следовательно, $F_{max} = 2f_0, F_{min} = f_0$, где $f_0 = 1/T$.
