---
title: "Кодирование данных в телекоммуникационных сетях"
output: html_document
---

## Цель

Изучение  методов  физического  и  логического кодирования,
используемых в цифровых сетях передачи данных.

## Задание

В процессе выполнения работы необходимо выполнить логическое и физическое
кодирование исходного сообщения в соответствии с заданными методами кодирования,
провести сравнительный анализ рассматриваемых методов кодирования, выбрать и обосновать
наилучший метод для передачи исходного сообщения.

## Ход работы

### Этап 1. Формирование сообщения

Исходное сообщение: `Лабушев Т.М.`

В шестнадцатеричном коде: `CB E0 E1 F3 F8 E5 E2 20 D2 2E CC 2E`

В двоичном коде: `11001011 11100000 11100001 11110011 11111000 11100101 11100010 00100000 11010010 00101110 11001100 00101110`

Длина сообщения: 12 байт (96 бит)

### Этап 2. Физическое кодирование исходного сообщения

#### Определение частот

Возьмем за основу разложение сигнала `10101010` в ряд Фурье ???

#### Потенциальный код NRZ

Результат кодирования первых четырех байт сообщения:

![Рисунок 1. Потенциальный код NRZ](nrz-enc.png)

Минимальный период достигается при кодировании чередующихся сигналов (`010`), а максимальный период — при кодировании последовательности единиц или нулей.

Поскольку в исходном сообщении встречаются чередующиеся сигналы `01` и `10`, мы рассматриваем период дискретного сигнала $T_0 = 2t$, где $t = \frac{1}{C}$ — время передачи одного бита, $C$ — пропускная способность канала. Таким образом, частота основной гармоники $f_0 = \frac{1}{T_0} = \frac{1}{2}C$.

Используя $T_0$, мы можем выразить максимальный период как `T_{max} = NT_0`, где $N$ — количество бит в самой длинной нечередующейся последовательности. В рассматриваемом сообщении такой последовательностью является `1111111` ($N=7$), следовательно, $T_{max} = 7T_0$. Минимальный период в NRZ кодировании равен $T_0$.

Найдем верхнюю и нижнюю границу частот, разложив сигналы в ряд Фурье:
$$\sum_{i\in{1,3,5,7}} \frac{1}{i}A_0sin(2\pi f_it),\ f_i = \frac{1}{T}i$$
Гармониками высших порядков пренебрежем из-за их малого вклада в результирующий сигнал.

Для сигнала из чередующихся единиц и нулей ($T_{max}$) получим:
$$A_0sin(2\pi \frac{1}{7}f_0t) + \frac{1}{3}A_0sin(2\pi \frac{3}{7}f_0t) + \frac{1}{5}A_0sin(2\pi \frac{5}{7}f_0t) + \frac{1}{7}A_0sin(2\pi f_0t) \implies f_{min} = \frac{1}{7}f_0$$

Для сигнала из семи последовательных единиц ($T_{min}$) получим:
$$A_0sin(2\pi f_0t) + \frac{1}{3}A_0sin(2\pi 3f_0t) + \frac{1}{5}A_0sin(2\pi 5f_0t) + \frac{1}{7}A_0sin(2\pi 7f_0t) \implies f_{max} = 7f_0$$

Таким образом, спектр сигнала: $\frac{1}{7}f_0\ldots 7f_0$.

Рассчитаем значения, зависящие от пропускной способности канала $C$:

* Частоту основной гармоники сигнала из последовательности `1111111...`: ?
* Нижнюю границу частот $f_{min} = \frac{1}{7}f_0 = \frac{1}{7}\cdot\frac{1}{2}C$
* Верхнюю границу частот $f_{max} = 7f_0 = 7\cdot\frac{1}{2}C$
* Необходимую полосу пропускания $F = f_{min} \ldots f_{max}$

Для нахождения среднего значения частоты передаваемого сообщения,
обратимся к диаграмме передачи первых четырех байтов.
На ней можно выделить пять участков с различными частотами:

* $f_1 = f_0$ при кодировании `0` и `1` (2 бита из 32)
* $f_2 = \frac{1}{2}f_0$ при кодировании `00` и `11` (8 бит из 32)
* $f_3 = \frac{1}{3}f_0$ при кодировании `000` и `111` (3 бита из 32)
* $f_4 = \frac{1}{4}f_0$ при кодировании `0000` и `1111` (4 бита из 32)
* $f_5 = \frac{1}{5}f_0$ при кодировании `00000` и `11111` (15 бит из 32)

Возьмем их среднее арифметическое:

$$f_{mean} = \frac{2}{32}\cdot f_0 + \frac{8}{32}\cdot\frac{1}{2}\cdot f_0 + \frac{3}{32}\cdot\frac{1}{3}\cdot f_0 + \frac{4}{32}\cdot\frac{1}{4}\cdot f_0 + \frac{15}{32}\cdot\frac{1}{5}\cdot f_0$$

```{r, echo=F}
mhz <- function(n, digits=4) toString(round(n / 10^6, digits))
nrz_fmin <- function(bps) 1/7*1/2*bps
nrz_fmax <- function(bps) 7*1/2*bps
nrz_fmean <- function(bps)
  (2/32*(1/2*bps) + 8/32*1/2*(1/2*bps) + 3/32*1/3*(1/2*bps) + 4/32*1/4*(1/2*bps) + 15/32*1/5*(1/2*bps))
```

##### Рассчитанные показатели

| $C$, бит/с | $f_{1\ldots}$, МГц | $f_{min}$, МГц | $f_{max}$, МГц | $F$, МГц | $f_{mean}$, МГц |
| --- | --- | --- | --- | --- | --- |
| $10^7$ | | $`r mhz(nrz_fmin(10^7), 6)`$ | $`r mhz(nrz_fmax(10^7))`$ | $`r mhz(nrz_fmin(10^7), 2)` \ldots `r mhz(nrz_fmax(10^7))`$ | $`r mhz(nrz_fmean(10^7))`$ |
| $10^8$ | | $`r mhz(nrz_fmin(10^8), 5)`$ | $`r mhz(nrz_fmax(10^8))`$ | $`r mhz(nrz_fmin(10^8), 1)` \ldots `r mhz(nrz_fmax(10^8))`$ | $`r mhz(nrz_fmean(10^8))`$ |
| $10^9$ | | $`r mhz(nrz_fmin(10^9), 4)`$ | $`r mhz(nrz_fmax(10^9))`$ | $`r mhz(nrz_fmin(10^9), 0)` \ldots `r mhz(nrz_fmax(10^9))`$ | $`r mhz(nrz_fmean(10^9))`$ |

#### Импульсный код RZ

Результат кодирования первых четырех байт сообщения:

![Рисунок 2. Потенциальный код RZ](rz-enc.png)

Минимальный период достигается при кодировании последовательных единиц или нулей (`11`, `00`), а максимальный период — при кодировании чередующихся сигналов (`01`, `10`). Примем $T_{max} = T_0$, тогда $T_{min} = \frac{1}{2}T$.

Разложим на ряд Фурье сигнал из чередующихся единиц и нулей ($T_{max}$):
$$A_0sin(2\pi f_0t) + \frac{1}{3}A_0sin(2\pi 3f_0t) + \frac{1}{5}A_0sin(2\pi 5f_0t) + \frac{1}{7}A_0sin(2\pi 7f_0t) \implies f_{min} = f_0$$

Разложим на ряд Фурье сигнал из последовательнызх единиц и нулей ($T_{min}$):
$$A_0sin(2\pi 2f_0t) + \frac{1}{3}A_0sin(2\pi 6f_0t) + \frac{1}{5}A_0sin(2\pi 10f_0t) + \frac{1}{7}A_0sin(2\pi 14f_0t) \implies f_{max} = 14f_0$$

Получим спектр сигнала $f_0\ldots 14f_0$.

Рассчитаем значения, зависящие от пропускной способности канала $C$:

* Частоту основной гармоники сигнала из последовательности `1111111...` вычислим, представив последовательность как повторяющийся сигнал `11`, частота основной гармоники которого известна ($2f_0$): $f_{1\ldots} = 2f_0 = C$
* Нижнюю границу частот $f_{min} = f_0 = \frac{1}{2}C$
* Верхнюю границу частот $f_{max} = 14f_0 = 14\cdot\frac{1}{2}C$
* Необходимую полосу пропускания $F = f_{min} \ldots f_{max}$

Для нахождения среднего значения частоты передаваемого сообщения, обратимся к диаграмме передачи первых четырех байтов.
На ней можно выделить два вида участков с различными частотами:

* $f_1 = f_0$ при кодировании `01` и `10` (8 бит из 32)
* $f_2 = 2f_0$ при кодировании `00` и `11` (24 бит из 32)

Возьмем их среднее арифметическое:

$$f_{mean} = \frac{8}{32}\cdot f_0 + \frac{24}{32}\cdot2f_0$$

```{r, echo=F}
rz_fmin <- function(bps) 1/2*bps
rz_fmax <- function(bps) 14*1/2*bps
rz_fmean <- function(bps) 8/32*(1/2*bps) + 24/32*2*(1/2*bps)
```

##### Рассчитанные показатели

| $C$, бит/с | $f_{1\ldots}$, МГц | $f_{min}$, МГц | $f_{max}$, МГц | $F$, МГц | $f_{mean}$, МГц |
| --- | --- | --- | --- | --- | --- | --- |
| $10^7$ | $`r mhz(10^7)`$ | $`r mhz(rz_fmin(10^7))`$ | $`r mhz(rz_fmax(10^7), 6)`$ | $`r mhz(rz_fmin(10^7))` \ldots `r mhz(rz_fmax(10^7))`$ | $`r mhz(rz_fmean(10^7))`$ |
| $10^8$ | $`r mhz(10^8)`$ | $`r mhz(rz_fmin(10^8))`$ | $`r mhz(rz_fmax(10^8), 5)`$ | $`r mhz(rz_fmin(10^8))` \ldots `r mhz(rz_fmax(10^8))`$ | $`r mhz(rz_fmean(10^8))`$ |
| $10^9$ | $`r mhz(10^9)`$ | $`r mhz(rz_fmin(10^9))`$ | $`r mhz(rz_fmax(10^9), 4)`$ | $`r mhz(rz_fmin(10^9))` \ldots `r mhz(rz_fmax(10^9))`$ | $`r mhz(rz_fmean(10^9))`$ |

#### Манчестерский код

Результат кодирования первых четырех байт сообщения:

![Рисунок 3. Манчестерский код](manchester-enc.png)

Минимальный период (верхняя граница частот) достигается при кодировании последовательности единиц или нулей (`11`, `00`), а максимальный период (нижняя граница частот) — при кодировании чередующихся единиц и нулей (`10`, `01`), то есть $T_{max} = 2T_{min} = T_0$.

Можно увидеть, что эти показатели полностью соответствует импульсному коду RZ, а следовательно, у данных кодов совпадет и разложение сигналов в ряд Фурье, и формулы для подсчета значений, зависящих от пропускной способности канала $C$.

Можно догадаться, что это неправильно.

На этом моменте я должен решить, то ли мне чай пойти выпить, то ли повеситься.